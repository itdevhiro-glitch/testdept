<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMMAND CENTER | TACTICAL OPS</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <nav class="sidebar">
        <div class="brand-icon"><i class="fa-solid fa-layer-group"></i></div>
        
        <div class="nav-btn active" id="btn-view-dash" data-tooltip="Dashboard">
            <i class="fa-solid fa-house-signal"></i>
        </div>
        <div class="nav-btn" id="btn-view-board" data-tooltip="Tactical Board">
            <i class="fa-solid fa-chart-simple"></i>
        </div>
        <div class="nav-btn" id="btn-view-list" data-tooltip="Roster List">
            <i class="fa-solid fa-table-list"></i>
        </div>
        <div class="nav-btn" id="btn-view-map" data-tooltip="Ops Map">
            <i class="fa-solid fa-map"></i>
        </div>
        <div class="nav-btn" id="btn-view-edit" data-tooltip="Live Editor">
            <i class="fa-solid fa-pen-to-square"></i>
        </div>
        <div class="nav-btn" id="btn-view-compare" data-tooltip="Compare Units">
            <i class="fa-solid fa-scale-balanced"></i>
        </div>
        <div class="nav-btn" id="btn-view-war" data-tooltip="Global War Room">
            <i class="fa-solid fa-earth-americas"></i>
        </div>
    </nav>

    <main class="main-content">
        
        <header class="top-bar">
            <div class="page-title" id="page-title">COMMAND DASHBOARD</div>
            
            <div class="control-group">
                <div id="user-info">
                    <span id="u-email">Connecting...</span>
                    <span class="player-count-badge" id="u-count">0 UNITS ACTIVE</span>
                </div>
                
                <div class="divider-v"></div>

                <div class="input-group-merged">
                    <input type="text" id="in-name" class="input-dark" placeholder="Unit Name..." style="width:140px;" autocomplete="off">
                    <div style="width:1px; height:20px; background:var(--border);"></div>
                    <select id="in-job" class="input-dark">
                        <option value="" disabled selected>Role / Job</option>
                        <optgroup label="WEAPON MASTER">
                            <option value="Rifleman">Rifleman</option>
                            <option value="Warrior">Warrior</option>
                            <option value="Sniper">Sniper</option>
                        </optgroup>
                        <optgroup label="BIO MASTER">
                            <option value="Ark Knight">Ark Knight</option>
                            <option value="Virus/Spore Hunter">Virus/Spore Hunter</option>
                            <option value="Exorcist">Exorcist</option>
                        </optgroup>
                        <optgroup label="GATHER">
                            <option value="Logger">Logger</option>
                            <option value="Hempicker">Hempicker</option>
                            <option value="Miner">Miner</option>
                        </optgroup>
                        <optgroup label="CRAFT">
                            <option value="Gunmaker">Gunmaker</option>
                            <option value="Armorer">Armorer</option>
                            <option value="Upholster">Upholster</option>
                        </optgroup>
                    </select>
                </div>
                
                <button class="btn btn-primary" id="btn-add">
                    <i class="fa-solid fa-plus"></i> <span>Add Unit</span>
                </button>
                
                <div class="divider-v"></div>
                
                <button class="btn btn-ghost" id="btn-bulk" title="Bulk Import"><i class="fa-solid fa-file-import"></i></button>
                <button class="btn btn-ghost" id="btn-copy" title="Copy for Discord"><i class="fa-brands fa-discord"></i></button>
                <button class="btn btn-danger" id="btn-logout" title="Logout"><i class="fa-solid fa-power-off"></i></button>
            </div>
        </header>

        <div id="view-dash" class="view-section active">
            <div class="dashboard-container">
                <div class="dash-grid">
                    <div class="dash-card">
                        <div class="dc-title">Total Forces</div>
                        <div class="dc-value" id="dash-total">0</div>
                        <div class="dc-sub">Registered Units</div>
                        <i class="fa-solid fa-users dc-icon"></i>
                    </div>
                    <div class="dash-card" style="border-bottom: 2px solid var(--success)">
                        <div class="dc-title">Active / On Camp</div>
                        <div class="dc-value" id="dash-on" style="color:var(--success)">0</div>
                        <div class="dc-sub">Ready for Deployment</div>
                        <i class="fa-solid fa-campground dc-icon"></i>
                    </div>
                    <div class="dash-card" style="border-bottom: 2px solid var(--warn)">
                        <div class="dc-title">Mercenary</div>
                        <div class="dc-value" id="dash-merc" style="color:var(--warn)">0</div>
                        <div class="dc-sub">Assigned Externally</div>
                        <i class="fa-solid fa-briefcase dc-icon"></i>
                    </div>
                    <div class="dash-card" style="border-bottom: 2px solid var(--danger)">
                        <div class="dc-title">Highest Combat</div>
                        <div class="dc-value" id="dash-top" style="font-size:1.8rem">N/A</div>
                        <div class="dc-sub" id="dash-top-val">Rating: 0</div>
                        <i class="fa-solid fa-medal dc-icon"></i>
                    </div>
                </div>

                <div class="chart-row">
                    <div class="chart-box">
                        <div class="chart-header">
                            <div class="ch-title">Job Specialization Distribution</div>
                            <i class="fa-solid fa-chart-pie" style="color:var(--text-muted)"></i>
                        </div>
                        <div style="flex:1; position:relative;">
                            <canvas id="jobChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-box">
                        <div class="chart-header">
                            <div class="ch-title">Deployment Status</div>
                            <i class="fa-solid fa-chart-bar" style="color:var(--text-muted)"></i>
                        </div>
                        <div style="flex:1; position:relative;">
                            <canvas id="statusChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-board" class="view-section">
            <div style="padding: 20px 25px 0 25px;">
                <div style="font-family:var(--font-head); font-size:1.1rem; color:white; margin-bottom:10px; display:flex; align-items:center; gap:10px;">
                    <i class="fa-solid fa-chess-board" style="color:var(--accent)"></i> TACTICAL OVERVIEW
                </div>
            </div>

            <div class="board-header-stats">
                <div class="bhs-card bhs-total-box">
                    <div style="font-size:0.8rem; text-transform:uppercase; letter-spacing:1px; color:var(--text-muted);">Current Field Power</div>
                    <div style="font-family:var(--font-head); font-size:2.8rem; font-weight:700; color:white; line-height:1; margin: 5px 0;" id="board-total-cp">0</div>
                    <div style="font-size:0.8rem; color:var(--success);"><i class="fa-solid fa-arrow-trend-up"></i> Active Units (No Reserve)</div>

                    <div class="mini-stat-row">
                        <div class="ms-item">
                            <div class="ms-val" id="board-total-atk" style="color:var(--danger)">0</div>
                            <div class="ms-lbl">Firepower</div>
                        </div>
                        <div class="ms-item">
                            <div class="ms-val" id="board-total-def" style="color:var(--accent)">0</div>
                            <div class="ms-lbl">Defense</div>
                        </div>
                        <div class="ms-item">
                            <div class="ms-val" id="board-avg-cp" style="color:var(--warn)">0</div>
                            <div class="ms-lbl">Avg. Rating</div>
                        </div>
                    </div>
                </div>

                <div class="bhs-card bhs-top3-box">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div style="font-size:0.8rem; text-transform:uppercase; letter-spacing:1px; color:var(--text-muted);">Elite Vanguards (Top 3)</div>
                        <i class="fa-solid fa-medal" style="color:var(--warn); opacity:0.5;"></i>
                    </div>
                    
                    <div class="top3-grid" id="board-top3-container">
                        <div style="text-align:center; color:var(--text-muted); grid-column:span 3; font-size:0.8rem; padding:10px;">
                            Not enough data...
                        </div>
                    </div>
                </div>
            </div>

            <div class="board-container" id="board-lanes" style="padding-top:0;"></div>
        </div>

        <div id="view-list" class="view-section">
            <div class="list-container">
                <div class="filter-bar" style="display:flex; gap:10px; margin-bottom:20px; background:rgba(0,0,0,0.2); padding:15px; border-radius:12px; border:1px solid var(--border);">
                    <div class="input-group-merged" style="flex:1;">
                        <i class="fa-solid fa-magnifying-glass" style="color:var(--text-muted); padding-left:12px;"></i>
                        <input type="text" id="f-name" class="input-dark" placeholder="Filter Name..." style="width:100%">
                    </div>
                    
                    <select id="f-team" class="input-dark" style="background:var(--bg-input); border:1px solid var(--border); border-radius:8px;">
                        <option value="ALL">All Squads</option>
                    </select>
        
                    <select id="f-class" class="input-dark" style="background:var(--bg-input); border:1px solid var(--border); border-radius:8px;">
                        <option value="ALL">All Classes</option>
                        <option value="WEAPON">Weapon Master</option>
                        <option value="BIO-OPS">Bio Ops</option>
                        <option value="GATHER">Gather</option>
                        <option value="CRAFT">Craft</option>
                    </select>
        
                    <select id="f-job" class="input-dark" style="background:var(--bg-input); border:1px solid var(--border); border-radius:8px;">
                        <option value="ALL">All Jobs</option>
                        <optgroup label="WEAPON MASTER">
                            <option value="Rifleman">Rifleman</option>
                            <option value="Warrior">Warrior</option>
                            <option value="Sniper">Sniper</option>
                        </optgroup>
                        <optgroup label="BIO MASTER">
                            <option value="Ark Knight">Ark Knight</option>
                            <option value="Virus">Virus / Spore Hunter</option>
                            <option value="Exorcist">Exorcist</option>
                        </optgroup>
                        <optgroup label="GATHER">
                            <option value="Logger">Logger</option>
                            <option value="Hempicker">Hempicker</option>
                            <option value="Miner">Miner</option>
                        </optgroup>
                        <optgroup label="CRAFT">
                            <option value="Gunmaker">Gunmaker</option>
                            <option value="Armorer">Armorer</option>
                            <option value="Upholster">Upholster</option>
                        </optgroup>
                    </select>
        
                    <button class="btn btn-ghost" id="btn-reset-filter" title="Reset"><i class="fa-solid fa-rotate-left"></i></button>
                </div>

                <table class="data-table">
                    <thead>
                        <tr>
                            <th class="sortable-th" onclick="window.toggleSort('name')" style="width:20%">
                                Unit Name <span id="sort-icon-name" class="sort-icon"><i class="fa-solid fa-sort"></i></span>
                            </th>
                            <th class="sortable-th" onclick="window.toggleSort('job')" style="width:20%">
                                Job / Specialization <span id="sort-icon-job" class="sort-icon"><i class="fa-solid fa-sort"></i></span>
                            </th>
                            <th class="sortable-th" onclick="window.toggleSort('rating')" style="width:15%">
                                Rating <span id="sort-icon-rating" class="sort-icon"><i class="fa-solid fa-sort"></i></span>
                            </th>
                            <th class="sortable-th" onclick="window.toggleSort('team')" style="width:20%">
                                Squad Assignment <span id="sort-icon-team" class="sort-icon"><i class="fa-solid fa-sort"></i></span>
                            </th>
                            <th class="sortable-th" onclick="window.toggleSort('class')" style="width:15%">
                                Class <span id="sort-icon-class" class="sort-icon"><i class="fa-solid fa-sort"></i></span>
                            </th>
                            <th style="width:10%; text-align:right">Opt</th>
                        </tr>
                    </thead>
                    <tbody id="table-body"></tbody>
                </table>
            </div>
        </div>

        <div id="view-map" class="view-section">
            <div class="map-tools">
                <div class="input-group-merged" style="border:none; padding:0;">
                    <i class="fa-solid fa-map-location-dot" style="color:var(--text-muted); margin-right:10px;"></i>
                    <select id="map-select" class="input-dark" style="background:var(--bg-input); border:1px solid var(--border); padding:8px;">
                        <option value="overview.jpg">Global Overview</option>
                        <option value="Kota1.jpg">Sector A (West)</option>
                        <option value="kota2.jpg">Sector B (East)</option>
                        <option value="Nuclear.jpg">Nuclear Plant</option>
                        <option value="mercu.jpg">Mercu Tower</option>
                    </select>
                </div>
                
                <div class="divider-v"></div>
                
                <div class="color-dot active" style="background:var(--danger)" data-color="#ef4444" title="Pen: Enemy (Red)"></div>
                <div class="color-dot" style="background:var(--accent)" data-color="#3b82f6" title="Pen: Ally (Blue)"></div>
                <div class="color-dot" style="background:var(--success)" data-color="#10b981" title="Pen: Safe (Green)"></div>
                <div class="color-dot" style="background:var(--warn)" data-color="#f59e0b" title="Pen: Caution (Yellow)"></div>
                
                <div style="flex:1"></div>
                <button class="btn btn-ghost" id="btn-clear-icons" style="margin-right:10px;"><i class="fa-solid fa-trash-can"></i> Icons</button>
                <button class="btn btn-ghost" id="btn-clear-map"><i class="fa-solid fa-eraser"></i> Drawing</button>
            </div>
            
            <div class="map-body-layout">
                <div class="icon-sidebar">
                    <div style="font-size:0.65rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; margin-bottom:5px;">Units</div>
                    
                    <div class="icon-draggable ico-ally" draggable="true" data-type="commander" title="Commander"><i class="fa-solid fa-crown"></i></div>
                    <div class="icon-draggable ico-ally" draggable="true" data-type="attacker" title="Attacker Squad"><i class="fa-solid fa-person-rifle"></i></div>
                    <div class="icon-draggable ico-ally" draggable="true" data-type="defender" title="Defender"><i class="fa-solid fa-shield-halved"></i></div>
                    
                    <div style="width:30px; height:1px; background:var(--border); margin:5px 0;"></div>
                    <div style="font-size:0.65rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; margin-bottom:5px;">Enemy</div>
        
                    <div class="icon-draggable ico-enemy" draggable="true" data-type="enemy-unit" title="Enemy Unit"><i class="fa-solid fa-skull"></i></div>
                    <div class="icon-draggable ico-enemy" draggable="true" data-type="enemy-sniper" title="Enemy Beacon"><i class="fa-solid fa-crosshairs"></i></div>
                    
                    <div style="width:30px; height:1px; background:var(--border); margin:5px 0;"></div>
                    <div style="font-size:0.65rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; margin-bottom:5px;">Object</div>
        
                    <div class="icon-draggable ico-obj" draggable="true" data-type="beacon" title="Beacon"><i class="fa-solid fa-tower-broadcast"></i></div>
                    <div class="icon-draggable ico-special" draggable="true" data-type="airdrop" title="Airdrop"><i class="fa-solid fa-parachute-box"></i></div>
                    <div class="icon-draggable ico-obj" draggable="true" data-type="transmitter" title="Transmitter"><i class="fa-solid fa-satellite-dish"></i></div>
                </div>
        
                <div class="map-canvas-box" id="map-box">
                    <img id="map-img" src="" alt="Select a Map Region">
                    <div id="icon-layer"></div>
                    <canvas id="draw-canvas"></canvas>
                </div>
            </div>
        </div>
        
        <div id="view-edit" class="view-section">
            <div class="editor-container">
                <div class="editor-toolbar">
                    <div style="display:flex; gap:20px; align-items:center;">
                        <div>
                            <div style="font-family:var(--font-head); font-size:1.4rem; font-weight:700; color:white;">LIVE DATA TERMINAL</div>
                            <div style="font-size:0.8rem; color:var(--text-muted);">Direct Database Access</div>
                        </div>

                        <div class="input-group-merged" style="width: 250px;">
                            <i class="fa-solid fa-magnifying-glass" style="padding-left:10px; color:var(--text-muted)"></i>
                            <input type="text" id="editor-search" class="input-dark" placeholder="Search Unit Name..." oninput="window.renderEditor()">
                        </div>
                    </div>

                    <button class="btn btn-ghost" onclick="window.renderEditor()"><i class="fa-solid fa-rotate"></i> Refresh</button>
                </div>

                <div class="sheet-wrapper">
                    <table class="sheet-table">
                        <thead>
                            <tr>
                                <th style="width: 50px;">#</th>
                                <th style="width: 180px;">Unit Name</th>
                                <th style="width: 120px;">Job</th>
                                <th style="width: 80px; color:var(--danger)">ATK</th>
                                <th style="width: 80px; color:var(--danger)">C.RATE</th>
                                <th style="width: 80px; color:var(--danger)">C.DMG</th>
                                <th style="width: 80px; color:var(--accent)">DEF</th>
                                <th style="width: 80px; color:var(--accent)">D.RED</th>
                                <th style="width: 80px; color:var(--accent)">C.RES</th>
                                <th style="width: 60px; text-align:center;">SAVE</th>
                            </tr>
                        </thead>
                        <tbody id="sheet-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="view-compare" class="view-section">
            <div class="comp-selector-area" style="padding: 20px 30px 0;">
                <div class="input-group-merged" style="flex:1;">
                    <i class="fa-solid fa-crosshairs" style="padding-left:12px; color:var(--accent)"></i>
                    <select id="comp-sel-1" class="input-dark" style="width:100%"><option value="">Select Unit A...</option></select>
                </div>
                <div style="font-family:var(--font-head); font-weight:800; font-size:1.5rem; color:var(--text-muted); opacity:0.5;">VS</div>
                <div class="input-group-merged" style="flex:1;">
                    <i class="fa-solid fa-crosshairs" style="padding-left:12px; color:var(--danger)"></i>
                    <select id="comp-sel-2" class="input-dark" style="width:100%"><option value="">Select Unit B...</option></select>
                </div>
            </div>

            <div id="comp-empty" style="text-align:center; color:var(--text-muted); margin-top:100px;">
                <i class="fa-solid fa-dna" style="font-size:4rem; margin-bottom:20px; opacity:0.2;"></i>
                <p style="text-transform:uppercase; letter-spacing:2px;">Awaiting Unit Selection Data...</p>
            </div>

            <div id="comp-results" class="comp-container" style="display:none; padding-top:10px;">
                <div class="comp-layout">
                    
                    <div class="comp-col-side" style="border-top: 3px solid var(--accent);">
                        <div class="unit-header-card">
                            <div class="unit-avatar-placeholder" style="border-color:var(--accent); color:var(--accent);">A</div>
                            <div id="c-name-1" class="uh-name">Unit A</div>
                            <span id="c-job-1" class="card-badge">JOB</span>
                            <div style="margin-top:15px;">
                                <div class="uh-score" id="c-score-1" style="color:var(--accent)">0</div>
                                <div class="uh-label">Combat Rating</div>
                            </div>
                        </div>

                        <div class="stat-group">
                            <div class="sg-title">Offensive Capabilities</div>
                            <div id="stats-atk-1"></div>
                        </div>
                        <div class="stat-group">
                            <div class="sg-title">Defensive Capabilities</div>
                            <div id="stats-def-1"></div>
                        </div>
                    </div>

                    <div class="comp-col-center">
                        <div style="text-align:center; margin-bottom:10px;">
                            <div style="font-size:0.8rem; text-transform:uppercase; letter-spacing:2px; color:var(--text-muted);">Tactical Analysis</div>
                        </div>
                        
                        <div class="radar-box">
                            <canvas id="compRadarChart"></canvas>
                        </div>

                        <div class="prediction-box">
                            <div style="font-family:var(--font-head); font-size:1.1rem; color:white; margin-bottom:5px;">SIMULATED DUEL</div>
                            <div style="display:flex; justify-content:space-between; font-size:0.8rem; font-weight:700;">
                                <span style="color:var(--accent)" id="pred-win-1">50%</span>
                                <span style="color:var(--text-muted)">WIN PROBABILITY</span>
                                <span style="color:var(--danger)" id="pred-win-2">50%</span>
                            </div>
                            <div class="pred-meter">
                                <div id="pm-left" class="pm-left" style="width:50%"></div>
                                <div id="pm-right" class="pm-right"></div>
                            </div>
                            <div id="pred-text" style="font-size:0.8rem; color:var(--text-muted); margin-top:10px;">Analysis based on ATK vs DEF ratios.</div>
                        </div>
                    </div>

                    <div class="comp-col-side" style="border-top: 3px solid var(--danger);">
                        <div class="unit-header-card">
                            <div class="unit-avatar-placeholder" style="border-color:var(--danger); color:var(--danger);">B</div>
                            <div id="c-name-2" class="uh-name">Unit B</div>
                            <span id="c-job-2" class="card-badge">JOB</span>
                            <div style="margin-top:15px;">
                                <div class="uh-score" id="c-score-2" style="color:var(--danger)">0</div>
                                <div class="uh-label">Combat Rating</div>
                            </div>
                        </div>

                        <div class="stat-group">
                            <div class="sg-title" style="text-align:right; border-color:rgba(239, 68, 68, 0.3); color:var(--danger)">Offensive Capabilities</div>
                            <div id="stats-atk-2"></div>
                        </div>
                        <div class="stat-group">
                            <div class="sg-title" style="text-align:right; border-color:rgba(239, 68, 68, 0.3); color:var(--danger)">Defensive Capabilities</div>
                            <div id="stats-def-2"></div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div id="view-war" class="view-section">
            <div class="war-room-container">
                <div class="war-header">
                    <div>
                        <h2 style="font-family:var(--font-head); color:white; text-transform:uppercase;">Global Coalition Analysis</h2>
                        <div style="font-size:0.9rem; color:var(--text-muted);">Comparing Total Combat Power of All Registered Camps (Reserves Excluded)</div>
                    </div>
                    <button class="btn btn-primary" id="btn-scan-global">
                        <i class="fa-solid fa-satellite-dish"></i> SCAN ALL DATA
                    </button>
                </div>

                <div id="war-loading" style="display:none; text-align:center; padding:50px;">
                    <i class="fa-solid fa-circle-notch fa-spin" style="font-size:3rem; color:var(--accent);"></i>
                    <p style="margin-top:15px; color:var(--text-muted);">Intercepting encrypted signals...</p>
                </div>

                <div id="war-content" class="leaderboard-grid" style="display:none;">
                    <div class="lb-sidebar">
                        <div style="padding:15px; background:rgba(0,0,0,0.2); border-bottom:1px solid var(--border); font-size:0.8rem; text-transform:uppercase; letter-spacing:1px; color:var(--text-muted);">
                            Top Power Ranking
                        </div>
                        <div id="lb-list-container" style="overflow-y:auto; flex:1;">
                            </div>
                    </div>

                    <div style="position:relative;">
                        <div id="war-detail-container" style="height:100%;">
                            <div style="display:flex; height:100%; align-items:center; justify-content:center; color:var(--text-muted); flex-direction:column;">
                                <i class="fa-solid fa-chart-simple" style="font-size:3rem; opacity:0.2; margin-bottom:15px;"></i>
                                Select a Camp to analyze details
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <div class="modal-overlay" id="modal-bulk">
        <div class="modal-content">
            <h3 style="margin-bottom:5px; font-family:var(--font-head); color:white; font-size:1.5rem;">BULK IMPORT</h3>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px;">Paste list below. Format: <code>Name - Job</code></p>
            
            <textarea id="bulk-txt" class="input-dark" style="width:100%; height:200px; font-family: 'JetBrains Mono', monospace; margin-bottom:20px; background: var(--bg-input); border:1px solid var(--border); border-radius:8px; line-height:1.5; resize:none;" placeholder="Hiro - Sniper&#10;Budi - Miner"></textarea>
            
            <div style="display:flex; justify-content:flex-end; gap:10px;">
                <button class="btn btn-ghost" id="btn-close-bulk">Cancel</button>
                <button class="btn btn-primary" id="btn-process-bulk">Start Import</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-detail">
        <div class="modal-content" style="width: 600px;">
            <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:20px; border-bottom:1px solid var(--border); padding-bottom:15px;">
                <div style="flex:1; margin-right:20px;">
                    <label style="color:var(--text-muted); font-size:0.7rem; text-transform:uppercase;">Unit Name (Editable)</label>
                    <input type="text" id="edit-name" class="input-dark" style="font-family:var(--font-head); font-size:1.8rem; color:white; width:100%; background:transparent; border:1px solid transparent; padding:0;" placeholder="Unit Name">
                    
                    <div style="display:flex; align-items:center; gap:10px; margin-top:5px;">
                        <span id="d-job" class="card-badge bg-soft-wpn">JOB CLASS</span>
                        
                        <select id="edit-status" class="input-dark" style="padding:2px 8px; font-size:0.75rem; border-radius:4px; border:1px solid var(--border);">
                            <option value="ON_CAMP">ðŸŸ¢ On Camp (Standby)</option>
                            <option value="MERCENARY">ðŸŸ¡ Mercenary (Duty Outside)</option>
                            <option value="OUT_CAMP">ðŸ”´ Ex-Member / Out</option>
                        </select>
                    </div>
                </div>

                <div style="text-align:right;">
                    <div style="font-size:0.8rem; color:var(--text-muted);">COMBAT RATING</div>
                    <div id="d-score" style="font-size:1.4rem; font-weight:700; color:var(--accent);">0</div>
                </div>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-bottom:25px;">
                <div style="display:flex; flex-direction:column; gap:15px;">
                    <div>
                        <label style="color:var(--text-muted); font-size:0.8rem; display:block; margin-bottom:5px;">Attack Power</label>
                        <div class="input-group-merged">
                            <i class="fa-solid fa-khanda" style="padding-left:10px; color:var(--danger)"></i>
                            <input type="number" id="in-atk" class="input-dark" style="width:100%">
                        </div>
                    </div>
                    <div>
                        <label style="color:var(--text-muted); font-size:0.8rem; display:block; margin-bottom:5px;">Crit Chance (%)</label>
                        <div class="input-group-merged">
                            <i class="fa-solid fa-bullseye" style="padding-left:10px; color:var(--warn)"></i>
                            <input type="number" id="in-crit-rate" class="input-dark" style="width:100%">
                        </div>
                    </div>
                    <div>
                        <label style="color:var(--text-muted); font-size:0.8rem; display:block; margin-bottom:5px;">Crit Dmg Bonus (%)</label>
                        <div class="input-group-merged">
                            <i class="fa-solid fa-burst" style="padding-left:10px; color:var(--warn)"></i>
                            <input type="number" id="in-crit-dmg" class="input-dark" style="width:100%">
                        </div>
                    </div>
                </div>

                <div style="display:flex; flex-direction:column; gap:15px;">
                    <div>
                        <label style="color:var(--text-muted); font-size:0.8rem; display:block; margin-bottom:5px;">Armor / Def</label>
                        <div class="input-group-merged">
                            <i class="fa-solid fa-shield" style="padding-left:10px; color:var(--accent)"></i>
                            <input type="number" id="in-def" class="input-dark" style="width:100%">
                        </div>
                    </div>
                    <div>
                        <label style="color:var(--text-muted); font-size:0.8rem; display:block; margin-bottom:5px;">Dmg Reduction (%)</label>
                        <div class="input-group-merged">
                            <i class="fa-solid fa-shield-virus" style="padding-left:10px; color:var(--success)"></i>
                            <input type="number" id="in-dmg-red" class="input-dark" style="width:100%">
                        </div>
                    </div>
                    <div>
                        <label style="color:var(--text-muted); font-size:0.8rem; display:block; margin-bottom:5px;">Crit Immunity (%)</label>
                        <div class="input-group-merged">
                            <i class="fa-solid fa-heart-crack" style="padding-left:10px; color:var(--purple)"></i>
                            <input type="number" id="in-crit-res" class="input-dark" style="width:100%">
                        </div>
                    </div>
                </div>
            </div>
            
            <input type="hidden" id="d-uid">

            <div style="display:flex; justify-content:flex-end; gap:10px; border-top:1px solid var(--border); padding-top:20px;">
                <button class="btn btn-ghost" id="btn-close-detail">Cancel</button>
                <button class="btn btn-primary" id="btn-save-detail">Save Attributes</button>
            </div>
        </div>
    </div>

    <select id="hidden-job-template" style="display:none">
        <optgroup label="WEAPON MASTER">
            <option value="Rifleman">Rifleman</option>
            <option value="Warrior">Warrior</option>
            <option value="Sniper">Sniper</option>
        </optgroup>
        <optgroup label="BIO MASTER">
            <option value="Ark Knight">Ark Knight</option>
            <option value="Virus/Spore Hunter">Virus/Spore Hunter</option>
            <option value="Exorcist">Exorcist</option>
        </optgroup>
        <optgroup label="GATHER">
            <option value="Logger">Logger</option>
            <option value="Hempicker">Hempicker</option>
            <option value="Miner">Miner</option>
        </optgroup>
        <optgroup label="CRAFT">
            <option value="Gunmaker">Gunmaker</option>
            <option value="Armorer">Armorer</option>
            <option value="Upholster">Upholster</option>
        </optgroup>
    </select>

    <script type="module" src="js/script.js"></script>
</body>
</html>